(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["vue3-context-menu"]=t(require("vue")):e["vue3-context-menu"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fb15")}({"6b0d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const n=e.__vccOpts||e;for(const[o,i]of t)n[o]=i;return n}},"8bbf":function(t,n){t.exports=e},"95c7":function(e,t,n){"use strict";n("f26c")},f26c:function(e,t,n){},fb15:function(e,t,n){"use strict";if(n.r(t),"undefined"!==typeof window){var o=window.document.currentScript,i=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(n.p=i[1])}var l=n("8bbf");const c={defaultMinWidth:100,defaultMaxWidth:600,defaultStartZindex:1},s=Object(l["createElementVNode"])("span",{class:"mx-right-arrow"},null,-1),r=[s],u=Object(l["createElementVNode"])("span",{class:"mx-right-arrow"},null,-1),a=[u],d=["onMouseenter","onFocus","onClick"],p={class:"text"},m={key:0,class:"mx-right-arrow"},h={key:0,class:"mx-context-menu-item-sperator"};function f(e,t,n,o,i,c){const s=Object(l["resolveComponent"])("ContextSubMenu",!0);return e.items?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,class:Object(l["normalizeClass"])("mx-context-menu "+(e.options.customClass?e.options.customClass:"")+(e.menuReady?" ready":"")),style:Object(l["normalizeStyle"])({maxWidth:e.parentItem&&e.parentItem.maxWidth?e.parentItem.maxWidth+"px":e.constOptions.defaultMaxWidth+"px",minWidth:e.parentItem&&e.parentItem.minWidth?e.parentItem.minWidth+"px":e.constOptions.defaultMinWidth+"px",zIndex:e.zIndex,left:e.position.x+"px",top:e.position.y+"px"}),onMouseenter:t[4]||(t[4]=(...t)=>e.onMenuMouseEnter&&e.onMenuMouseEnter(...t)),onMouseleave:t[5]||(t[5]=t=>e.onMenuMouseLeave(t))},[Object(l["withDirectives"])(Object(l["createElementVNode"])("div",{class:"mx-context-menu-updown up",onClick:t[0]||(t[0]=t=>e.onScroll(!1))},r,512),[[l["vShow"],e.menuOverflow]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("div",{class:"mx-context-menu-updown down",onClick:t[1]||(t[1]=t=>e.onScroll(!0))},a,512),[[l["vShow"],e.menuOverflow]]),Object(l["createElementVNode"])("div",{class:"mx-context-menu-items",ref:"menu",style:Object(l["normalizeStyle"])({maxHeight:e.maxHeight>0?e.maxHeight+"px":""})},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.items,(n,o)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:o},[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])("mx-context-menu-item"+(n.disabled?" disabled":"")),onMouseenter:t=>e.showChildItem(t,n),onMouseleave:t[2]||(t[2]=t=>e.hideChildItem()),onFocus:t=>e.showChildItem(t,n),onBlur:t[3]||(t[3]=t=>e.hideChildItem()),onClick:t=>e.onMouseClick(n)},[Object(l["createElementVNode"])("span",p,[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(n.icon+" icon "+e.options.iconFontClass)},null,2),Object(l["createElementVNode"])("span",null,Object(l["toDisplayString"])(n.label),1),n.children&&n.children.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",m)):Object(l["createCommentVNode"])("",!0)])],42,d),n.divided?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h)):Object(l["createCommentVNode"])("",!0)]))),128))],4),e.activeItem&&e.activeItem.children?(Object(l["openBlock"])(),Object(l["createBlock"])(s,{key:0,ref:"childMenu",zIndex:e.zIndex+1,items:e.activeItem.children,parentItem:e.activeItem,options:e.options,globalData:e.childGlobalData,position:e.childPosition,onClose:e.onChildrenClose,onKeepOpen:e.onChildrenKeepOpen,onPreUpdatePos:e.onChildrenUpdatePos},null,8,["zIndex","items","parentItem","options","globalData","position","onClose","onKeepOpen","onPreUpdatePos"])):Object(l["createCommentVNode"])("",!0)],38)):Object(l["createCommentVNode"])("",!0)}var b=Object(l["defineComponent"])({name:"ContextSubMenu",props:{items:{type:Object,default:null},parentItem:{type:Object,default:null},options:{type:Object,default:null},zIndex:{type:Number,default:0},globalData:{type:Object,default:null},position:{type:Object,default:null}},emits:["close","keepOpen","preUpdatePos"],setup(e,t){const{globalData:n,position:o,options:i,parentItem:s}=Object(l["toRefs"])(e),r=Object(l["ref"])(),u=Object(l["ref"])(),a=Object(l["ref"])(!1),d=Object(l["ref"])(!1);let p=null;const m=Object(l["ref"])(0),h=Object(l["ref"])(null),f=Object(l["ref"])({parentPosition:{x:0,y:0},screenSize:n.value.screenSize}),b=Object(l["ref"])({x:0,y:0});function v(e,t){if(t.disabled||!t.children||0==t.children.length)return;if(h.value===t)return;h.value=t,f.value.parentPosition.x=n.value.parentPosition.x+o.value.x,f.value.parentPosition.y=n.value.parentPosition.y+o.value.y,r.value&&(b.value.x=r.value.offsetWidth+(i.value.xOffset||0));const l=e.target;l&&(b.value.y=l.offsetTop+(i.value.yOffset||0))}function x(){p=h.value,setTimeout(()=>{p===h.value&&(h.value=null)})}function O(e){x(),e&&t.emit("close",!0)}function j(e){p===e&&(p=null),t.emit("keepOpen",s.value)}function y(e){b.value.x=e.x,b.value.y=e.y}function C(e){e.disabled||("function"===typeof e.onClick?(e.onClick(),t.emit("close",!0)):e.children&&0!==e.children.length||t.emit("close",!0))}function w(){t.emit("keepOpen",s.value)}function P(e){null!=e.relatedTarget&&t.emit("close",!1)}function M(e){r.value&&(r.value.scrollTop+=e?30:-30)}Object(l["watch"])(h,(e,t)=>{e&&t&&setTimeout(()=>{u.value&&u.value.doCheckPos()},50)});let S=0;function k(){const e=r.value,i=n.value;if(e){const n={x:o.value.x,y:o.value.y},l=i.parentPosition.x+o.value.x+e.offsetWidth;if(l>i.screenSize.w&&(n.x-=l-i.screenSize.w),e.offsetHeight>i.screenSize.h-30)m.value=i.screenSize.h-30,n.y=-i.parentPosition.y,d.value=!0;else{d.value=!1,m.value=0;const t=i.parentPosition.y+o.value.y+e.offsetHeight;t>i.screenSize.h&&(n.y-=t-i.screenSize.h+30)}t.emit("preUpdatePos",n),a.value=!0}}return Object(l["onMounted"])(()=>{S=window.setTimeout(()=>k(),100)}),Object(l["onBeforeUnmount"])(()=>{S>0&&(clearTimeout(S),S=0)}),{menu:r,menuOverflow:d,childMenu:u,menuReady:a,maxHeight:m,showChildItem:v,hideChildItem:x,onChildrenClose:O,onChildrenKeepOpen:j,onChildrenUpdatePos:y,onMenuMouseLeave:P,onMenuMouseEnter:w,onMouseClick:C,onScroll:M,doCheckPos:k,activeItem:h,childGlobalData:f,childPosition:b,constOptions:c}}}),v=(n("95c7"),n("6b0d")),x=n.n(v);const O=x()(b,[["render",f]]);var j=O,y=Object(l["defineComponent"])({name:"ContextMenu",emits:["update:show","close"],props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},data(){return{currentShowPos:{x:0,y:0}}},mounted(){this.updateCurrentShowPos(),setTimeout(()=>{document.addEventListener("click",this.close),document.addEventListener("contextmenu",this.close)},100)},beforeUnmount(){document.removeEventListener("click",this.close)},watch:{show(e){e&&this.updateCurrentShowPos()}},render(){return this.show?Object(l["h"])(j,{items:this.options.items,parentItem:{maxWidth:this.options.maxWidth||c.defaultMaxWidth,minWidth:this.options.minWidth||c.defaultMinWidth},options:this.options,zIndex:this.options.zIndex||c.defaultStartZindex,globalData:{parentPosition:{x:0,y:0},screenSize:{w:document.body.clientWidth,h:document.body.clientHeight}},position:this.currentShowPos,onClose:this.onChildrenClose,onPreUpdatePos:this.onChildrenUpdatePos}):[]},methods:{updateCurrentShowPos(){this.currentShowPos.x=this.options.x,this.currentShowPos.y=this.options.y},close(){this.$emit("update:show",!1),this.$emit("close")},onChildrenClose(e){e&&(this.$emit("close"),this.$emit("update:show",!1))},onChildrenUpdatePos(e){this.currentShowPos.x=e.x,this.currentShowPos.y=e.y}}});const C=y;var w=C;const P=()=>document.createElement("div"),M=(e,t)=>{const n=Object(l["h"])(w,{options:e,show:!0,onClose:()=>{Object(l["render"])(null,t)}});return Object(l["render"])(n,t),document.body.appendChild(t.firstElementChild),n.component},S=e=>{const t=P();M(e,t)};var k={install(e){e.config.globalProperties.$contextmenu=S,e.component("ContextMenu",w),e.component("ContextSubMenu",j)},showContextMenu(e){S(e)}},g=k;t["default"]=g}})}));
//# sourceMappingURL=vue3-context-menu.umd.min.js.map